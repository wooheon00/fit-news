<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸</title>
    <meta charset="UTF-8">
    <script>
        async function logClick(newsId) {
           const accessToken = localStorage.getItem("accessToken");

           if (!accessToken) {
               // ë¡œê·¸ì¸ ì•ˆ í–ˆìœ¼ë©´ ë¡œê·¸ ì•ˆ ë‚¨ê¸°ê³  ë°”ë¡œ dummy í˜ì´ì§€ë¡œ ì´ë™
               window.location.href = "/dummy";
               return;
           }

           // ë¡œê·¸ì¸ í•œ ê²½ìš° â†’ ë¡œê·¸ ì €ì¥ API í˜¸ì¶œ
           await fetch("/api/logs/click", {
               method: "POST",
               headers: {
                   "Content-Type": "application/json",
                   "Authorization": "Bearer " + accessToken   // ğŸ‘ˆ ì—¬ê¸° í† í° ì¶”ê°€
               },
               body: JSON.stringify({ newsId })
           });

           // ì„±ê³µ/ì‹¤íŒ¨ ê´€ê³„ì—†ì´ dummy í˜ì´ì§€ë¡œ ì´ë™
           window.location.href = "/dummy";
       }
    </script>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<h1>ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸</h1>
<hr>

<!-- ë‰´ìŠ¤ ë¦¬ìŠ¤íŠ¸ -->
<h2>ë‰´ìŠ¤ ëª©ë¡</h2>
<ul>
    <li><a href="#" onclick="logClick('news1')">ë‰´ìŠ¤ 1</a></li>
    <li><a href="#" onclick="logClick('news2')">ë‰´ìŠ¤ 2</a></li>
    <li><a href="#" onclick="logClick('news3')">ë‰´ìŠ¤ 3</a></li>
</ul>

</body>
</html>
